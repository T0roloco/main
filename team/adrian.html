<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Adrian Tan - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Student-Planner</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2113-AY1819S1-T13-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Adrian Tan - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="role-team-lead-developer-git-expert"><a class="link" href="#role-team-lead-developer-git-expert">Role: Team Lead, Developer, Git Expert</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Responsibilities: Devops, Integration, Scheduling and tracking</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-student-planner"><a class="link" href="#project-student-planner">PROJECT: Student Planner</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Student Planner is a all-in-one desktop manager application that allows students to manage their contacts, tasks, events and expenses. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to backup/restore user data</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to backup current user data both online and locally. Backups can be restored by using the restore command.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because a user may have the app on many desktops and this provides a convenient way to synchronise them among many devices.</p>
</li>
<li>
<p>Highlights: This enhancement enables a generic class that can be easily extended by developers to support more types of online backup services in future. It requires an in-depth analysis of design alternatives.
The implementation too was challenging as the backing up of data online may take a long time, existing implementation will cause the application to freeze until any backup is completed.
The current implementation exhibits a working knowledge of multithreading applications, concurrency as well as event driven programming.</p>
</li>
<li>
<p>Credits: GitHub Api by kohsuke.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added a user preferences command that allows the user to customise their application preferences such as default backup locations, online backup data location and other application settings.</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com">Functional code</a>] [<a href="https://github.com">Test code</a>] <em>{give links to collated code files}</em></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed all releases on GitHub</p>
</li>
<li>
<p>Setup and modified most of the initial documentation prior to v1.1</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Wrote additional tests for existing features (Pull requests <a href="https://github.com">#36</a>, <a href="https://github.com">#38</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Did cosmetic tweaks to existing contents of the User Guide</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): <a href="https://github.com/CS2113-AY1819S1-T13-1/main/pull/42">1</a>, <a href="https://github.com/CS2113-AY1819S1-T13-1/main/pull/72">2</a></p>
</li>
<li>
<p>Contributed to forum discussions (examples:  <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/30">1</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/4">2</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/27">3</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/16">4</a> , <a href="https://github.com/nusCS2113-AY1819S1/forum/issues?q=commenter%3AQzSG">full list</a>)</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:  <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/4">1</a>, <a href="https://github.com/nusCS2113-AY1819S1/forum/issues/27">2</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a third party library (Github Api by kohsuke) to the project (<a href="https://github.com/kohsuke/github-api" class="bare">https://github.com/kohsuke/github-api</a>)</p>
</li>
<li>
<p>Integrated a new Github App (Travis.com) to the team repo</p>
<div class="ulist">
<ul>
<li>
<p>This is different from other teams still using the old deprecated OAuth Flow used on the older Travis.org domain</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="backup-data-code-backup-code"><a class="link" href="#backup-data-code-backup-code">Backup data : <code>backup</code></a></h3>
<div class="paragraph">
<p>Allow user to backup data <em>locally</em> or to online services.</p>
</div>
<div class="paragraph">
<p>Format: <code>backup | [GITHUB ACCESS_TOKEN]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>For GitHub online backup, a personal access token must be provided in <code>ACCESS_TOKEN</code></p>
</li>
<li>
<p>Proceed to <a href="https://github.com/settings/tokens/new">Github Settings</a> and create a token under
<code>Personal Access Token</code>, allow the <code>gist</code> scope to allow Gists Creation. The create token is your authentication token</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>backup</code><br>
Creates a local backup to the backup paths in <code>preferences.json</code>.</p>
</li>
<li>
<p><code>backup github ACCESS_TOKEN_HERE</code><br>
Creates an online backup to GitHub Gists using the provided personal access token.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="restore-data-code-restore-code"><a class="link" href="#restore-data-code-restore-code">Restore data : <code>restore</code></a></h3>
<div class="paragraph">
<p>Allow user to restore data backups <em>locally</em> or from online services.</p>
</div>
<div class="paragraph">
<p>Format: <code>restore | [Service ACCESS_TOKEN_IF_REQUIRED]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>For GitHub online restore, access token is not required! It is only required to create the secret gist during backup process</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>restore</code><br>
Restores Student Planner data using local backups in backup paths inside <code>preferences.json</code>.</p>
</li>
<li>
<p><code>restore github</code><br>
Restores Student Planner data on GitHub Gists.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>An failure message will be shown if no prior backups were made before restore command is used</p>
</li>
<li>
<p>If that happens, do proceed to first create a backup using <code>backup</code> command.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clearing-all-entries-code-clear-code"><a class="link" href="#clearing-all-entries-code-clear-code">Clearing all entries : <code>clear</code></a></h3>
<div class="paragraph">
<p>Clears all entries from the schedule planner.<br>
Format: <code>clear</code></p>
</div>
</div>
<div class="sect2">
<h3 id="exiting-the-program-code-exit-code"><a class="link" href="#exiting-the-program-code-exit-code">Exiting the program : <code>exit</code></a></h3>
<div class="paragraph">
<p>Exits the program.<br>
Format: <code>exit</code></p>
</div>
</div>
<div class="sect2">
<h3 id="configure-backup-and-restore-settings-code-coming-in-v2-0-code"><a class="link" href="#configure-backup-and-restore-settings-code-coming-in-v2-0-code">Configure backup and restore settings <code>[coming in v2.0]</code></a></h3>
<div class="paragraph">
<p>Allow user to configure backup settings (configure and save cloud services authentication tokens like GitHub gists or Google Drive, backup location) by calling <code>backup doctor</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="backup-feature"><a class="link" href="#backup-feature">Backup Feature</a></h3>
<div class="sect3">
<h4 id="backups-types"><a class="link" href="#backups-types">Backups Types</a></h4>
<div class="paragraph">
<p>The application supports both local and online backups</p>
</div>
</div>
<div class="sect3">
<h4 id="backup-implementation"><a class="link" href="#backup-implementation">Backup Implementation</a></h4>
<div class="paragraph">
<p>A <code>OnlineStorage</code> interface must be implemented by all forms of Online backup services. This allows developers to easily add and extend the list of supported backup services by implementing a common set of methods.
The current minimum set of methods that must be implemented are</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OnlineStorage#saveContentToStorage</code>.</p>
</li>
<li>
<p><code>OnlineStorage#readContentFromStorage</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For local backups, the book specific <code>{Book}Storage</code> interface adapted from <code>AddressBookStorage</code> are implemented and used.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-is-the-backup-command-initiated"><a class="link" href="#aspect-how-is-the-backup-command-initiated">Aspect: How is the backup command initiated</a></h5>
<div class="paragraph">
<p>The backup mechanism is unique from the other command implementation as the execution of a <code>BackupCommand</code> uses an event driven approach to activate a backup request instead of going through the model manager. Backup command is executed this way
because of the following reason.</p>
</div>
<div class="paragraph">
<p>Backup requires the current in memory book data inside the <code>Model</code>, however the <code>execute</code> function is actually passed our <code>model</code> containing the required books data. We can raise a backup event directly with the books data provided in the model we have access too</p>
</div>
<div class="paragraph">
<p>The raised event is observed and handled by the storage manager which performs the backup (either local or through supported online services) using the books from the <code>model</code> passed in through the <code>OnlineBackupEvent</code> or <code>LocalBackupEvent</code></p>
</div>
</div>
<div class="sect4">
<h5 id="aspect-implementation-of-performing-backup"><a class="link" href="#aspect-implementation-of-performing-backup">Aspect: Implementation of performing backup</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Performing backup of data files using worker threads.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Solves the age old problem of a graphical application appearing to freeze which can away end user experience as when the main JavaFX thread is blocked as is the case in the inherited default AB4 codebase</p>
</li>
<li>
<p>Cons: Difficult to ensure that threads have no unsafe threads operations especially since we are dealing with file storage. Cross thread exception is difficult to handle.
Difficult to ensure that no two threads attempt to access the same resource.
Inter-thread synchronisation and cross thread exception handling is difficult too.
we have to implement a way to check when all threads are complete and signal the main ui thread to provide user with a proper success or failure notification</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Utilise the existing implementation of blocking the main GUI thread whenever a file storage operation is being performed</p>
<div class="ulist">
<ul>
<li>
<p>Pros: No work needed in implementation.</p>
</li>
<li>
<p>Cons: Notable freezes in Student Planner application even for small files. User cannot perform any other operation while backup is being performed</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="further-justification"><a class="link" href="#further-justification">Further justification</a></h6>
<div class="paragraph">
<p>Concurrency is not a topic commonly taught in beginning software engineering classes. The class that this application was created for is no exception. The common reason for this is that concurrency and multithreading
are two slightly advanced topics that students will not usually touch in beginning modules. However, one can consider this to be a paradox as most beginner software engineering modules will involve the creation of an
application with graphical output which usually consists of long running operations which should not be handled or performed on the main GUI thread. This is the best time to teach students about using worker or
 background threads to prevent main GUI thread from blocking operations such as file I/O, it is also the most succinct demonstration of the need for concurrency.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="command-flow"><a class="link" href="#command-flow">Command Flow</a></h4>
<div class="imageblock">
<div class="content">
<img src="../images/backup-example.png" alt="backup example">
</div>
</div>
<div class="paragraph">
<p>When a user enters a backup command to perform data backup. <code>BackupCommand#execute</code> raises a <code>LocalBackupEvent</code> or a <code>OnlineBackupEvent</code>.
The <code>StorageManager</code> subscribes to the events and will perform the backup of the various books such as <code>ReadOnlyAddressBook</code>, <code>ReadOnlyExpenseBook</code> etc provided in the event payload. This allows us to separate
backup concerns from the Model as explain above earlier, in a similar manner, the storage component is also decoupled from the model component with regards to backup operations.</p>
</div>
<div class="paragraph">
<p>For example in the case of saving backup data to GitHub. We have the flow of steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After a correct backup command is entered by the user, <code>BackupCommand#execute</code> raises a <code>OnlineBackupEvent</code> with the payload consisting of <code>OnlineStorage.Type</code> , the various book models, and a authentication token.</p>
</li>
<li>
<p><code>StorageManager#handleOnlineBackupEvent</code> calls <code>backupOnline</code> which starts an <code>ExecutorService</code> to perform data backup to Github storage with worker tasks from <code>getOnlineBackupTask</code></p>
<div class="paragraph">
<p>To prevent the main JavaFX UI thread from freezing during the entire duration of the online backup, worker threads are used to performs the online backup without blocking the main thread.</p>
</div>
<div class="paragraph">
<p>Tasks created using <code>javafx.concurrent.tasks</code> allows us to use task handlers which run in the context of the main JavaFX application thread.</p>
</div>
<div class="paragraph">
<p>This allows us to capture any thrown exceptions in the worker thread and show to the user in the form of a error popup.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>backupTask.setOnFailed(event -&gt; {
    raise(new DataSavingExceptionEvent((Exception) backupTask.getException()));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>This multi-threaded approach allows us to perform long running tasks on worker threads while still waiting for all backup threads
to complete before showing success notification for the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>backupTask.setOnSucceeded(event -&gt; {
    raise(new NewResultAvailableEvent(backupTask.getMessage()));
    raise((OnlineBackupSuccessResultEvent) backupTask.getValue());
});</code></pre>
</div>
</div>
</li>
<li>
<p>The specific online service that implements the <code>OnlineStorage</code> interface will be called.
In this example, <code>GithubStorage#saveContentToStorage</code> is called for the respective data books which utilises a third party Github API Library
 to create and save gists to GitHub.</p>
</li>
<li>
<p>When each backup task for each book data is completed, a <code>OnlineBackupSuccessResultEvent</code> is raised by the <code>setOnSucceeded</code> task handler.</p>
</li>
<li>
<p><code>Model#handleOnlineBackupSuccessResultEvent</code> receives the event and updates the <code>UserPrefs</code> model based on the gist id returned from the successful backup</p>
</li>
<li>
<p>A <code>UserPrefsChangedEvent</code> is fired which is handled by <code>Storage</code> which saves the updated <code>UserPrefs</code> to storage.</p>
</li>
<li>
<p>A <code>NewNotificationAvailableEvent</code> is also fired. This event is handled by the <code>UiManager</code> which calls <code>showNotification</code> that creates a new notification and shows
it to the user.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proposed-data-encryption"><a class="link" href="#proposed-data-encryption">[Proposed] Data Encryption</a></h3>
<div class="paragraph">
<p><em>{Explain here how the data encryption feature will be implemented}</em></p>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-07 11:42:47 UTC</div></div></div></body></html>